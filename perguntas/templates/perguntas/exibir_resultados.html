{% extends 'base.html' %}
{% block title %}Resultados da Enquete: {{ enquete.titulo }}{% endblock %}
{% block content %}
    <h1>Resultados da Enquete: {{ enquete.titulo }}</h1>
    <p>{{ enquete.descricao }}</p>

    {% if resultados %}
        {% for resultado in resultados %}
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">{{ resultado.pergunta }}</h5>
                    <p class="card-text">Tipo de Resposta: {{ resultado.tipo }}</p>
                    {% if resultado.opcoes %}
                        <ul class="list-group">
                            {% for opcao_resultado in resultado.opcoes %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    {{ opcao_resultado.opcao }}:
                                    <span class="badge badge-primary badge-pill">{{ opcao_resultado.contagem }} votos ({{ opcao_resultado.porcentagem }})</span>
                                </li>
                            {% endfor %}
                        </ul>
                    {% elif resultado.respostas_texto %}
                        <h6 class="mt-3">Respostas Livres:</h6>
                        <ul class="list-group">
                            {% for resposta in resultado.respostas_texto %}
                                <li class="list-group-item">{{ resposta }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="alert alert-info">Ainda não há respostas para esta enquete.</p>
    {% endif %}

    <a href="{% url 'listar_enquetes' %}" class="btn btn-secondary mt-3">Voltar para a lista de enquetes</a>
{% endblock %}